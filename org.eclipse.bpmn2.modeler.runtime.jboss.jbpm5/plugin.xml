<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

   <extension point="org.eclipse.emf.ecore.generated_package">
      <package
            class="org.eclipse.bpmn2.modeler.runtime.jboss.jbpm5.model.ModelPackage"
            genModel="model/jBPM5Extensions.genmodel"
            uri="http://www.jboss.org/drools">
      </package>
   </extension>

	<extension point="org.eclipse.bpmn2.modeler.runtime">
		<runtime name="JBoss jBPM5 Business Process Engine" versions="5.1,5.2,5.3"
			id="org.jboss.runtime.jbpm5"
			class="org.eclipse.bpmn2.modeler.runtime.jboss.jbpm5.JBPM5RuntimeExtension"
			description="BPMN2 Modeler customizations for the JBoss jBPM5 engine">
		</runtime>

		<model runtimeId="org.jboss.runtime.jbpm5"
			uri="http://www.jboss.org/drools"
			resourceFactory="org.eclipse.bpmn2.modeler.runtime.jboss.jbpm5.model.util.ModelResourceFactoryImpl">
		</model>

		<propertyTab
			category="BPMN2"
			id="bpmn2.jbpm.tab"
			replaceTab="org.eclipse.bpmn2.modeler.main.tab"
			runtimeId="org.jboss.runtime.jbpm5"
			label="Custom Task">
		</propertyTab>

		<propertySection
			class="org.eclipse.bpmn2.modeler.runtime.jboss.jbpm5.property.JbpmPropertySection"
			filter="org.eclipse.bpmn2.modeler.ui.property.Bpmn2PropertyFilter"
			id="bpmn2.jbpm.tab.section"
			runtimeId="org.jboss.runtime.jbpm5"
			tab="bpmn2.jbpm.tab">
		</propertySection>

		<customTask
			createFeature="org.eclipse.bpmn2.modeler.runtime.jboss.jbpm5.features.LogTaskFeatureContainer"
			id="org.eclipse.bpmn2.modeler.runtime.jboss.jbpm5.LogTask"
			runtimeId="org.jboss.runtime.jbpm5"
			name="Log Task"
			type="Task">
			<property name="taskName" value="log"/>
			<property name="displayName" value="Log Task"/>
			<property name="icon" value="icons/log.png"/>
			<!-- TODO: wip
			<property name="extensionValues">
				<value>
					<property name="value">
						<value>
							<property name="onEntryScript">
								<value>
									<property name="script" value="onEntry"/>
								</value>
							</property>
						</value>
					</property>
				</value>
			</property>			
			-->
			<property name="ioSpecification">
				<value>
					<property name="dataInputs">
						<value>
							<property name="name" value="parameter"/>
						</value>
					</property>
					<property name="dataInputs">
						<value>
							<property name="name" value="message"/>
						</value>
					</property>
					<property name="dataOutputs">
						<value>
							<property name="name" value="result"/>
						</value>
					</property>

					<property name="inputSets">
						<value>
							<property name="dataInputRefs" ref="ioSpecification/dataInputs#0"/>
						</value>
					</property>
					<property name="inputSets">
						<value>
							<property name="dataInputRefs" ref="ioSpecification/dataInputs#1"/>
						</value>
					</property>

					<property name="outputSets">
						<value>
							<property name="dataOutputRefs" ref="ioSpecification/dataOutputs#0"/>
						</value>
					</property>
				</value>
			</property>
			<property name="dataInputAssociations">
				<value>
					<property name="sourceRef" value="variable"/>
					<property name="targetRef" ref="ioSpecification/dataInputs#0"/>
				</value>
			</property>
			<property name="dataInputAssociations">
				<value>
					<property name="sourceRef" value="variable"/>
					<property name="targetRef" ref="ioSpecification/dataInputs#1"/>
				</value>
			</property>
		</customTask>

		<customTask
			createFeature="org.eclipse.bpmn2.modeler.runtime.jboss.jbpm5.features.EmailTaskFeatureContainer"
			id="org.eclipse.bpmn2.modeler.runtime.jboss.jbpm5.EmailTask"
			runtimeId="org.jboss.runtime.jbpm5"
			name="Email Task"
			type="Task">
			<property name="taskName" value="send"/>
			<property name="displayName" value="Email Task"/>
			<property name="icon" value="icons/email.png"/>
		</customTask>

	</extension>
	
</plugin>
